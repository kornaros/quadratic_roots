<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>kornaros_demo_for_quadratic_roots</title>
  <script src="https://sagecell.sagemath.org/static/jquery.min.js"></script>
  <script src="https://sagecell.sagemath.org/embedded_sagecell.js"></script>
  <script>
    $(function () {
      sagecell.makeSagecell({
        inputLocation: '#sage-interact',
        template: sagecell.templates.interact,
        evalButtonText: '',
        autoeval: true,
        hide: ['editor', 'evalButton']
      });
    });
  </script>
</head>
<body style="font-family: Arial, sans-serif; margin: 2em; max-width: 800px;">
  <h2>Διαδραστικό Demo – Λύση Δευτεροβάθμιας Εξίσωσης</h2>
  <p style="font-size: 1.1em; color: #333;">
    Αυτό είναι ένα διαδραστικό demo των δυνατοτήτων του <strong>SageMath</strong>.
    Μπορείτε να υπολογίσετε τις ρίζες μιας δευτεροβάθμιας εξίσωσης εισάγοντας τιμές για τους συντελεστές <strong>a, b, c</strong> στο διάστημα <code>[-10, 10]</code>.
    Οι τιμές μπορούν να περιλαμβάνουν μαθηματικές παραστάσεις όπως:
    <code>π</code>, <code>e</code>, <code> ln(2)/code>, <code>sqrt(2)</code> (τετραγωνική ρίζα του 2), κ.ά.
    <br><br>
    Απλώς εισάγετε τιμές και πατήστε <strong>Enter</strong> ή αλλάξτε πεδίο για να εκτελεστεί ο υπολογισμός.
  </p>

  <div id="sage-interact">
    <script type="text/x-sage">
@interact
def solve_quadratic(
    a_str=input_box('1', label='a', type=str),
    b_str=input_box('1', label='b', type=str),
    c_str=input_box('1', label='c', type=str)
):
    try:
        a = SR(a_str)
        b = SR(b_str)
        c = SR(c_str)

        # Περιορισμός τιμών μεταξύ -10 και 10
        if not all(-10 <= val.n() <= 10 for val in [a, b, c]):
            pretty_print(html("<span style='color:red'>Οι τιμές πρέπει να είναι μεταξύ -10 και 10.</span>"))
            return

        # Συνάρτηση μορφοποίησης συντελεστή με παρένθεση όταν χρειάζεται
        def format_coef_parentheses(coef):
            # Παρενθέσεις για αρνητικούς αριθμούς ή μη ακέραιες/σύνθετες εκφράσεις
            if coef.is_integer() and coef > 0:
                return str(int(coef))
            else:
                return f"({latex(coef)})"

        a_fmt, b_fmt, c_fmt = format_coef_parentheses(a), format_coef_parentheses(b), format_coef_parentheses(c)

        eq = a*x^2 + b*x + c == 0
        Delta = b^2 - 4*a*c
        Delta_val = Delta.n()

        show(LatexExpr(r"\text{Λύνουμε την εξίσωση:} \quad %s x^2 + %s x + %s = 0" % (
            a_fmt, b_fmt, c_fmt)))
        show(LatexExpr(r"\Delta = b^2 - 4ac = %s" % latex(Delta)))

        # Σχεδίαση γραφήματος
        plot1 = plot(a*x^2 + b*x + c, (x, -10, 10), ymin=-10, ymax=10, color='blue', thickness=2, legend_label="y = ax² + bx + c")

        # Υπολογισμός ριζών
        if Delta_val >= 0:
            r1 = (-b + sqrt(Delta)) / (2*a)
            r2 = (-b - sqrt(Delta)) / (2*a)
            roots = [r1, r2] if Delta_val > 0 else [r1]

            # Εμφάνιση τύπου με παρενθέσεις όπου χρειάζεται + αριθμητική τιμή
            if Delta_val > 0:
                show(LatexExpr(
                    r"\textcolor{green}{\text{Πραγματικές ρίζες: }} "
                    r"x_1 = \frac{%s + \sqrt{%s}}{%s} \approx %s, \; "
                    r"x_2 = \frac{%s - \sqrt{%s}}{%s} \approx %s" %
                    (format_coef_parentheses(-b), latex(Delta), format_coef_parentheses(2*a), latex(r1.n(digits=3)),
                     format_coef_parentheses(-b), latex(Delta), format_coef_parentheses(2*a), latex(r2.n(digits=3)))
                ))
            else:
                r = r1
                show(LatexExpr(
                    r"\textcolor{green}{\text{Διπλή ρίζα: }} x = \frac{%s}{%s} \approx %s" %
                    (format_coef_parentheses(-b), format_coef_parentheses(2*a), latex(r.n(digits=3)))
                ))

            # Σημεία στο γράφημα για τις προσεγγιστικές τιμές
            for r in roots:
                plot1 += point((r.n(), 0), size=30, color='green')

        else:
            # Μιγαδικές ρίζες
            r1 = (-b + sqrt(Delta)) / (2*a)
            r2 = (-b - sqrt(Delta)) / (2*a)
            roots = [r1, r2]
            show(LatexExpr(
                r"\textcolor{red}{\text{Μη πραγματικές ρίζες: }} x_1 = %s, \; x_2 = %s" %
                (latex(r1), latex(r2))
            ))
            # Δεν προστίθενται σημεία για μιγαδικές ρίζες

        plot1.show(legend_loc='upper right')

    except Exception:
        pretty_print(html("<span style='color:red'>Σφάλμα στην είσοδο: παρακαλώ συμπληρώστε σωστά τον μαθηματικό τύπο.</span>"))

    </script>
  </div>
</body>
</html>


